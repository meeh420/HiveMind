{"definition_id":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","last_refresh_timestamp":1393347552879,"postexecution_handlers":[],"definition":{"id":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","code":"\nString emailAddress = arguments.get(\"user_name\");\nString passWord\t\t= arguments.get(\"pass_word\");\nString full_name\t= arguments.get(\"full_name\");\n\nObject user = crud.add(\"user_name\",emailAddress).call(\"get.stm\");\n\n\nif(user != null){\n    return crud.add(\"error_message\",\"There is an existing account for this email address.\")\n  \t\t.call(\"/reg/\");\n  \n\t//return \"{\\\"status\\\":\\\"failed\\\",\\\"msg\\\":\\\"There is an existing account for this email address.\\\"}\";\n}\n\nif(\n   (emailAddress != null && !emailAddress.isEmpty()) &&\n   (passWord != null && passWord.length()>=5) && \n   (full_name != null && !full_name.isEmpty())){\n  \n    String user_id = crud\n  \t\t.add(\"user_name\",emailAddress)\n  \t\t.add(\"pass_word\",passWord/*+\":\"+verification_code*/)\n  \t\t.add(\"full_name\",full_name)  \t\t\n  \t\t.call(\"add.stm\");\n   \n   //send verification email \n    /*crud\n  \t   .add(\"emailAddress\",emailAddress)\n       .add(\"user_id\",user_id)\n  \t   .add(\"verification_code\",verification_code)\n       .add(\"userName\",first_name)\n       .call(\"send-verification-code.esd\"); */ \n  \n  //return \"{\\\"status\\\":\\\"success\\\"}\";\n    return crud.add(\"success_message\",\"Accounted created, please <a href=\\\"../secure/\\\">sign-in<\/a>\")\n  \t\t.call(\"/reg/\");  \n}\nreturn crud.add(\"error_message\",\"Please provide all required fields. <\/br>Password must be at least 5 characters.\")\n  \t\t.call(\"/reg/\");\n//return \"{\\\"status\\\":\\\"failed\\\",\\\"msg\\\":\\\"Please provide all required fields. <\/br>Password must be at least 5 characters.\\\"}\";\n","name":"register","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1393347550061"},"preexecution_handlers":[],"execution_parameters":[{"id":"7bf7c351-2400-4a73-b1bf-2946ca8dcfde","definitionId":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","required":"no","name":"verification_code","type":"string","validationRegEx":"","defaultValue":":crudzilla_generate_uuid","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"yes","keepAliveCount":null,"isFinal":"yes","position":"0"},{"id":"19653796-c14d-49ed-973a-a1d96e919508","definitionId":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","required":"no","name":"emailAddress","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"1"},{"id":"d36023f7-243b-4ec9-a7d4-eb886016c43e","definitionId":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","required":"no","name":"passWord","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"2"},{"id":"e8ac996d-fd6b-4ef6-81dd-57c89ce6db1c","definitionId":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","required":"no","name":"first_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"3"},{"id":"ca3b3a60-e3bd-451c-9ab3-5777950fc0ec","definitionId":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","required":"no","name":"screen_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"4"},{"id":"61a2788c-04d5-476e-b4f6-983db8dd9035","definitionId":"c7dbb2ae-e584-4e04-a724-ff4e0604e734","required":"no","name":"last_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"5"}],"reference_id":"b7a68a3a-d64b-4b8f-a768-dd347dcd6b5e","accesscontrols":[]}