{"definition_id":"43adf5d4-69e1-40d1-95be-cd3817ea782a","last_refresh_timestamp":1392868104328,"postexecution_handlers":[],"definition":{"id":"43adf5d4-69e1-40d1-95be-cd3817ea782a","code":"import java.io.StringWriter;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport org.apache.log4j.WriterAppender;\nimport org.apache.log4j.PatternLayout;\n\nif(crudzilla.sysSettings().get(\"loggerStringWriter\") == null || reload.compareTo(\"true\") == 0){\n  Object loggerConfig = crud.call(loggerConfigPath);\n\n  StringWriter consoleWriter = new StringWriter();\n  WriterAppender appender = new WriterAppender(new PatternLayout(loggerConfig.pattern),consoleWriter);\n  appender.setName(loggerConfig.name);\n\n  if(loggerConfig.level.compareToIgnoreCase(\"ALL\") == 0)\n  \tappender.setThreshold(org.apache.log4j.Level.ALL);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"DEBUG\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.DEBUG); \n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"INFO\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.INFO);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"ERROR\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.ERROR);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"TRACE\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.TRACE);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"OFF\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.OFF);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"WARN\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.WARN);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"ERROR\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.ERROR); \n\n  crudzilla.sysSettings().set(\"loggerStringWriter\",consoleWriter);\n  \n  for(Object loggerClass:loggerConfig.classes){\n    try\n    {\n      \tif(loggerClass.className != null && !loggerClass.className.isEmpty())\n      \t\tLogger.getLogger(Class.forName(loggerClass.className)).addAppender(appender);\n        else\n        if(loggerClass.name != null && !loggerClass.name.isEmpty()){\n            Logger logger = Logger.getLogger(loggerClass.name);\n            logger.addAppender(appender);\n            logger.setLevel(org.apache.log4j.Level.DEBUG);\n        }\n      \n    }catch(Exception ex){\n      crud.logger().info(\"Error configuring CWAB appender for logger \",ex);\n    }\n  }\n}","name":"configure-log4j-loggers","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1382373970376"},"preexecution_handlers":[],"execution_parameters":[{"id":"df766fac-ff88-4721-a58e-5833a5d7f838","definitionId":"43adf5d4-69e1-40d1-95be-cd3817ea782a","required":"no","name":"loggerConfigPath","type":"crud","validationRegEx":"","defaultValue":"config.ins","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":"","isFinal":"yes","position":"0"},{"id":"f36370db-2421-4183-84f6-dcf6bd155607","definitionId":"43adf5d4-69e1-40d1-95be-cd3817ea782a","required":"no","name":"reload","type":"string","validationRegEx":"","defaultValue":"false","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"1"}],"reference_id":"aa4d63ae-5918-46be-9738-34586ba581ab","accesscontrols":[]}