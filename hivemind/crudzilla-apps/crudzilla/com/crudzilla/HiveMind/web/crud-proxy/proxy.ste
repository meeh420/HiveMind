{"definition_id":"ea9fa1b3-23e6-4d4c-b5eb-be68f5b370cb","last_refresh_timestamp":1394567967709,"postexecution_handlers":[],"definition":{"id":"ea9fa1b3-23e6-4d4c-b5eb-be68f5b370cb","code":"import java.util.List;\nimport com.crudzilla.platform.Crudzilla;\n\nString assetBaseDir = assetBaseDir = (new File(crud.appBaseDir()+\"/\"+crudzilla.sysSettings().get(\"crudzilla_asset_base\")).getCanonicalPath());\nCrudzilla tempCrudEngine = null;\n\ncrud.logger().info(\"crud path:\"+crudPath);\n\n//find the app if necessary\nif(/*crudAppPath == null*/true){\n  List apps = crud.call(\"/new-web-app/app-list/apps.ins\");\n  \n  for(Object app:apps){\n    \n    if(crudPath.startsWith(app.baseDir)){\n       crudAppPath = app.baseDir;\n       \n       //relativize crudPath\n       crudPath = crudPath.substring(crudAppPath.length());\n       \n       break;\n    }\n  }\n}\n\n/*\nif(crudzilla.sysSettings().get(crudAppPath) != null)\n\ttempCrudEngine = crudzilla.sysSettings().get(crudAppPath);\nelse{\n    crud.logger().info(\"loading engine \"+assetBaseDir+crudAppPath);\n\ttempCrudEngine = new Crudzilla(assetBaseDir+crudAppPath);\n}\n\n//cache this engine for improved performance.\ncrudzilla.sysSettings().set(crudAppPath,tempCrudEngine);\n\narguments.put(\"crudzilla_system_settings\",tempCrudEngine.sysSettings());\n*/\n\nif(arguments.get(\"crudzilla-html-layout-request\") != null){\n        \n    \n    return crud\n    .add(\"appBaseDir\",assetBaseDir+crudAppPath)\n  \t.add(\"resPath\",crudPath)\n    .add(\"baseId\",baseId)\n    .call(\"/html-layout/html-preprocessor.ste\");\n}\n\n//make call to simulated engine\n//return tempCrudEngine.execute(crudPath,arguments,true, null);\n\nString module = assetBaseDir+crudAppPath.substring(0,crudAppPath.lastIndexOf(\"/\"));\n\ncrud.logger().info(\"calling module:\"+module);\n\nreturn crud.using(module).call(crudPath.isEmpty()?\"/\":crudPath,arguments);\n","name":"proxy","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"yes","requireAllIdentities":"no","lastModifiedTimeStamp":"1394567963253"},"preexecution_handlers":[],"execution_parameters":[{"id":"6407b7f1-3fc1-4cf5-b98e-01f5f8be4c83","definitionId":"ea9fa1b3-23e6-4d4c-b5eb-be68f5b370cb","required":"no","name":"crudAppPath","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"0"},{"id":"28e4c532-5bd2-4e9b-95e6-42babd340273","definitionId":"ea9fa1b3-23e6-4d4c-b5eb-be68f5b370cb","required":"no","name":"crudPath","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"1"},{"id":"c4ad2061-57f3-4a50-a535-984d2439c4a2","definitionId":"ea9fa1b3-23e6-4d4c-b5eb-be68f5b370cb","required":"no","name":"baseId","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"2"}],"reference_id":"30bd395b-d896-4561-a2ba-2c677d0e0d9a","accesscontrols":[]}