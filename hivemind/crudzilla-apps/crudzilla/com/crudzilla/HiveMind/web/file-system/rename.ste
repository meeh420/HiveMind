{"definition_id":"2f19c95e-f3e1-4ce7-bb2d-33a1bf85970a","last_refresh_timestamp":1392581004681,"postexecution_handlers":[],"definition":{"id":"2f19c95e-f3e1-4ce7-bb2d-33a1bf85970a","code":"import java.util.Map;\nimport java.util.HashMap;\nimport com.crudzilla.platform.util.CrudzillaUtil;\nimport java.io.File;\n\nMap returnVal = new HashMap();\nString fullPath = CrudzillaUtil.getFile(crudzilla,relPath).getAbsolutePath();\n\nString fileName = name;\n\ncrud.logger().info(\"rename \"+fullPath+\" to \"+name);\n\nFile existingFile = new File(fullPath);\nFile newFile = new File(existingFile.getParentFile().getAbsolutePath()+\"/\"+fileName);\nif(newFile.exists()){\n  returnVal.put(\"status\", \"error\");\n  return returnVal;\n}\nexistingFile.renameTo(newFile);\nString relativePath = newFile.getAbsolutePath().substring(newFile.getParentFile().getAbsolutePath().length()+1);\nreturnVal.put(\"status\",\"success\");\nreturnVal.put(\"path\",relativePath);\n\n\nif(relPath.lastIndexOf('/') != -1){\n  relativePath = relPath.substring(0,relPath.lastIndexOf('/'))+\"/\"+fileName;\n}\n\nreturn returnVal;","name":"rename","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1392581003157"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"85bb5ba7-a09c-4485-927c-38a9116821ed","accesscontrols":[]}