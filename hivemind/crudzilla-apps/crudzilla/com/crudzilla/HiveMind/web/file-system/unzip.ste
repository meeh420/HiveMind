{"definition_id":"47b322cd-ea87-442f-9114-4875170dd05a","last_refresh_timestamp":1394984860406,"postexecution_handlers":[],"definition":{"id":"47b322cd-ea87-442f-9114-4875170dd05a","code":"  String assetBaseDir = new File(crud.appBaseDir()+\"/\"+crudzilla.sysSettings().get(\"crudzilla_asset_base\")).getCanonicalPath();\n\n\n  def unZip(String zipFile,String destDir){\n        File file = new File(zipFile);\n \n        String unzipDir;\n        String unzipFileName;\n        String topMostEntryName = com.crudzilla.util.Unzip.getTopMostEntryName(file.getAbsolutePath());\n\n        if(zipFile.lastIndexOf(\".zip\")>-1)\n            unzipFileName = zipFile.substring(0,zipFile.lastIndexOf(\".zip\"));\n        else\n            unzipFileName = zipFile;\n\n        \n        //if there is a top-most entry that is a folder and it has the same name as zip file (sans extension), then flatten directory structure\n        if(new File(unzipFileName).getName().compareTo(topMostEntryName) == 0){\n            unzipDir = /*destDir+\"/\"+*/unzipFileName;\n            //System.out.println(\"Unziping with skip\");\n            com.crudzilla.util.Unzip.unzipAndSkipBase(file.getAbsolutePath(),unzipDir);\n        }\n        else{\n            unzipDir = /*destDir+\"/\"+*/unzipFileName;\n            com.crudzilla.util.Unzip.unzip(file.getAbsolutePath(),unzipDir);\n        }\n        //file.delete();\n    }\n\n   unZip(assetBaseDir+relPath,\n         assetBaseDir+relPath.substring(0,relPath.lastIndexOf(\"/\")));","name":"unzip","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1394984857386"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"3e69bca3-4dcf-441d-9966-fe33e8f32c85","accesscontrols":[]}