{"definition_id":"f2936ab7-a17c-4851-8c03-290a61213d56","last_refresh_timestamp":1378565149005,"postexecution_handlers":[],"definition":{"id":"f2936ab7-a17c-4851-8c03-290a61213d56","code":"import org.apache.commons.io.FileUtils;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.io.File;\n\nString assetBaseDir = new File(crud.appBaseDir()+\"/\"+crudzilla.sysSettings().get(\"crudzilla_asset_base\")).getCanonicalPath();\nString snapShotBaseDir = assetBaseDir+\"/crudzilla-backup-snapshots\";\n\n\n//get the current working version of this snapshot\nFile workingFile = new File(assetBaseDir+\"/\"+relPath);\n\nif(workingFile.isFile())\n\tFileUtils.copyFile(workingFile,new File(snapShotBaseDir+\"/current/\"+relPath));\nelse{\n    \n    FileUtils.copyDirectoryToDirectory(workingFile,new File(new File(snapShotBaseDir+\"/current/\"+relPath).getParent()));\n}","name":"add-to-backup","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1376586684852"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"5f88b0f7-a131-40a3-a01e-49f24b36642c","accesscontrols":[]}