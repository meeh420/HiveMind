{"definition_id":"3ed811f4-3d3b-4ac5-b2ca-9f76c8f85497","last_refresh_timestamp":1392504432157,"postexecution_handlers":[],"definition":{"id":"3ed811f4-3d3b-4ac5-b2ca-9f76c8f85497","code":"import java.util.List;\nimport com.crudzilla.platform.Crudzilla;\n\nString assetBaseDir = assetBaseDir = (new File(crud.appBaseDir()+\"/\"+crudzilla.sysSettings().get(\"crudzilla_asset_base\")).getCanonicalPath());\nCrudzilla tempCrudEngine = null;\n\n//find the app if necessary\nif(crudAppPath == null){\n  List apps = crud.call(\"/new-web-app/app-list/apps.ins\");\n  for(Object app:apps){\n    if(crudPath.startsWith(app.baseDir)){\n       crudAppPath = app.baseDir;\n      \n       //relativize crudPath\n       crudPath = crudPath.substring(crudAppPath.length());\n       break;\n    }\n  }\n}\n\n/**\nif(crudzilla.sysSettings().get(crudAppPath) != null)\n\ttempCrudEngine = crudzilla.sysSettings().get(crudAppPath);\nelse{\n    crud.logger().info(\"loading engine \"+assetBaseDir+crudAppPath);\n\ttempCrudEngine = new Crudzilla(assetBaseDir+crudAppPath);\n}\n\n//cache this engine for improved performance.\ncrudzilla.sysSettings().set(crudAppPath,tempCrudEngine);\n\narguments.put(\"crudzilla_system_settings\",tempCrudEngine.sysSettings());\n\n//make call to simulated engine\nreturn tempCrudEngine.execute(crudPath,arguments,true, null);\n*/\ncrud.logger().info(\"calling module:\"+assetBaseDir+crudAppPath.substring(0,crudAppPath.lastIndexOf(\"/\")));\ncrud.using(assetBaseDir+crudAppPath.substring(0,crudAppPath.lastIndexOf(\"/\")))\n.call(crudPath,arguments);","name":"run-test","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1392504430179"},"preexecution_handlers":[],"execution_parameters":[{"id":"0780f402-5bfb-413c-8da5-8bbf999c7294","definitionId":"3ed811f4-3d3b-4ac5-b2ca-9f76c8f85497","required":"no","name":"crudAppPath","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"0"}],"reference_id":"79fa220b-1dc3-4b3d-a1d7-676ef0d54ec8","accesscontrols":[]}