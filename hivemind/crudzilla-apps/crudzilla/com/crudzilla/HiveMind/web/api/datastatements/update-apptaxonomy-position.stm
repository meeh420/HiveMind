{"definition_id":"3e7eeab3-93ea-4709-9ec4-cdfc962808d0","last_refresh_timestamp":1374201433612,"postexecution_handlers":[{"definitionId":"3e7eeab3-93ea-4709-9ec4-cdfc962808d0","id":"c15ead4c-1980-4008-8d84-4a19d9334084","enable":"yes","path":"/api/scriptexecutors/update-apptaxonomy-root.ste","returnValName":"","returnMode":"ignore_return","primaryResultVarName":"","argPropagationListPath":"","argPropagationMode":"pass_map"}],"definition":{"id":"3e7eeab3-93ea-4709-9ec4-cdfc962808d0","definitionId":"3e7eeab3-93ea-4709-9ec4-cdfc962808d0","sqlCode":"update apptaxonomy set\nparent_id=:parent_id, \npresibling_id=:presibling_id\nwhere\n(  \n  /*apptaxonomy.apptaxonomy_id=:apptaxonomy_id and */\n  apptaxonomy.id=:id\n)\nand\n(\n   (\n      select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where \n      (\n        (\n          (\n            apptaxonomy.apptaxonomy_id = '0' and \n            apptaxonomy_accesscontrol.apptaxonomy_id = apptaxonomy.id\n          ) \n          or \n          apptaxonomy_accesscontrol.apptaxonomy_id = apptaxonomy.apptaxonomy_id\n        )\n        and\n        (\n          apptaxonomy_accesscontrol.user_id=:crudzilla_user/* or \n          (\n            select count(user_roles.role_id) from \n            user_roles where user_roles.user_id=:crudzilla_user and user_roles.role_id= apptaxonomy_accesscontrol.role_id\n          )>0*/\n        ) \n        and\n        (\n          apptaxonomy_accesscontrol.write_access='yes'\n        )\n      )\n   )>0\n)\n\n\n","preparedStatement":"update apptaxonomy set\nparent_id=?, \npresibling_id=?\nwhere\n(  \n  \n  apptaxonomy.id=?\n)\nand\n(\n   (\n      select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where \n      (\n        (\n          (\n            apptaxonomy.apptaxonomy_id = '0' and \n            apptaxonomy_accesscontrol.apptaxonomy_id = apptaxonomy.id\n          ) \n          or \n          apptaxonomy_accesscontrol.apptaxonomy_id = apptaxonomy.apptaxonomy_id\n        )\n        and\n        (\n          apptaxonomy_accesscontrol.user_id=?\n        ) \n        and\n        (\n          apptaxonomy_accesscontrol.write_access='yes'\n        )\n      )\n   )>0\n)\n\n\n","preparedStatementParamList":"parent_id,presibling_id,id,crudzilla_user","statementType":"select","resultSetTemplate":"{}","dataSourcePath":"/crudzilla-app-settings/crudzilla-crud-datasource.ins","name":"update-apptaxonomy-position","description":"","sqlDialect":"text/x-mysql","crudType":"datastatement","transactionPath":null,"transactionAction":null,"dataModelReferencePath":null,"resultSetProcessorPath":null,"sqlSrcPath":null,"serverSideOnly":"no","lastModifiedTimeStamp":"1374172072709"},"preexecution_handlers":[{"definitionId":"3e7eeab3-93ea-4709-9ec4-cdfc962808d0","id":"cb92e5ea-4483-4677-bf5e-0c57f8b60935","enable":"yes","path":"/api/scriptexecutors/validate_apptaxonomy_position.ste","returnValName":"","onlyProceedOnTrue":"yes","argPropagationListPath":"","argPropagationMode":"pass_map"}],"type_definition":{"name":"datastatement","postValidateHandler":"","implementorPath":"/crudzilla-platform/engine/datastatement-crud-implementor.ste","implementorRefType":"reference","initializerPath":"/crudzilla-platform/engine/on-datastatement-crud-loaded.ste"},"execution_parameters":[],"reference_id":"32c1c071-c741-4cff-9a6b-27b83e190ace","accesscontrols":[]}