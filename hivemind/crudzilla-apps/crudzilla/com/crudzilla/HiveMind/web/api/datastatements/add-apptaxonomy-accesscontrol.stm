{"definition_id":"8f2cd8d6-efc1-11e1-9c7d-0800273c185b","last_refresh_timestamp":1374201438747,"postexecution_handlers":[{"definitionId":"8f2cd8d6-efc1-11e1-9c7d-0800273c185b","id":"bfab74cc-f28e-4dd1-8abf-7a41edfed38e","enable":"yes","path":"/api/scriptexecutors/get-crudzilla-last-insert-id.ste","returnValName":"id","returnMode":"return_as_primary","primaryResultVarName":"","argPropagationListPath":"","argPropagationMode":"pass_map"}],"definition":{"id":"8f2cd8d6-efc1-11e1-9c7d-0800273c185b","definitionId":"8f2cd8d6-efc1-11e1-9c7d-0800273c185b","sqlCode":"insert into apptaxonomy_accesscontrol \n(\n id,\n user_id,\n role_id,\n apptaxonomy_id,\n create_access,\n read_access,\n write_access,\n delete_access,\n execute_access,\n extended_access\n) \n(\n  select distinct\n  :crudzilla_next_insert_id,\n  :userId,\n  :roleId,\n  :definition_id,\n  :createAccess,\n  :readAccess,\n  :writeAccess,\n  :deleteAccess,\n  :executeAccess,\n  :extendedAccess\n  from crudzilla\n  where crudzilla.id='identity' and  \n  (\n    (\n          select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where apptaxonomy_accesscontrol.apptaxonomy_id=:definition_id \n    ) = 0\n    or  \n    (\n        select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol\n        where\n        (\n            (\n              apptaxonomy_accesscontrol.apptaxonomy_id=:definition_id\n            )\n            and\n            (\n              apptaxonomy_accesscontrol.user_id=:crudzilla_user/* or \n              (\n                select count(user_roles.role_id) from \n                user_roles where user_roles.user_id=:crudzilla_user and user_roles.role_id=apptaxonomy_accesscontrol.role_id\n              )>0*/\n            ) \n            and \n            (\n              apptaxonomy_accesscontrol.write_access='yes'\n            )\n         )\n     )>0\n  )\n)\n","preparedStatement":"insert into apptaxonomy_accesscontrol \n(\n id,\n user_id,\n role_id,\n apptaxonomy_id,\n create_access,\n read_access,\n write_access,\n delete_access,\n execute_access,\n extended_access\n) \n(\n  select distinct\n  ?,\n  ?,\n  ?,\n  ?,\n  ?,\n  ?,\n  ?,\n  ?,\n  ?,\n  ?\n  from crudzilla\n  where crudzilla.id='identity' and  \n  (\n    (\n          select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where apptaxonomy_accesscontrol.apptaxonomy_id=? \n    ) = 0\n    or  \n    (\n        select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol\n        where\n        (\n            (\n              apptaxonomy_accesscontrol.apptaxonomy_id=?\n            )\n            and\n            (\n              apptaxonomy_accesscontrol.user_id=?\n            ) \n            and \n            (\n              apptaxonomy_accesscontrol.write_access='yes'\n            )\n         )\n     )>0\n  )\n)\n","preparedStatementParamList":"crudzilla_next_insert_id,userId,roleId,definition_id,createAccess,readAccess,writeAccess,deleteAccess,executeAccess,extendedAccess,definition_id,definition_id,crudzilla_user","statementType":"select","resultSetTemplate":"{}","dataSourcePath":"/crudzilla-app-settings/crudzilla-crud-datasource.ins","name":"add-apptaxonomy-accesscontrol","description":"","sqlDialect":"text/x-mysql","crudType":"datastatement","transactionPath":null,"transactionAction":null,"dataModelReferencePath":null,"resultSetProcessorPath":null,"sqlSrcPath":null,"serverSideOnly":"no","lastModifiedTimeStamp":"1374171032866"},"preexecution_handlers":[],"type_definition":{"name":"datastatement","postValidateHandler":"","implementorPath":"/crudzilla-platform/engine/datastatement-crud-implementor.ste","implementorRefType":"reference","initializerPath":"/crudzilla-platform/engine/on-datastatement-crud-loaded.ste"},"execution_parameters":[],"reference_id":"a31439eb-45ca-4023-ac6e-e66f48354d2e","accesscontrols":[]}