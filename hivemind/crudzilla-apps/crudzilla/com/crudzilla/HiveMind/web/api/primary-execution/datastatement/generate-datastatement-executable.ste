{"definition_id":"75450e18-6e4d-4390-af69-b4bbb1021e42","last_refresh_timestamp":1392954712077,"postexecution_handlers":[],"definition":{"id":"75450e18-6e4d-4390-af69-b4bbb1021e42","code":"import java.util.Map;\nimport java.util.HashMap;\n\ndef attachTransaction(c){\n  Object transaction  = httpRequest.getSession().getAttribute(\"crudzilla_transaction_object\");\n  \n  if(transaction != null){\n    //Object action  = httpRequest.getSession().getAttribute(\"crudzilla_transaction_action\");\n    c.getArguments().put(\"crudzilla_transaction_object\",transaction);\n    c.getArguments().put(\"crudzilla_transaction_\"+transaction.get(\"name\"),httpRequest.getSession().getAttribute(\"crudzilla_transaction_\"+transaction.get(\"name\")));\n    c.getArguments().put(\"crudzilla_transaction_action\",\"join\");\n  }\n  return c;\n}\n\nMap definition = new HashMap();\ndefinition.put(\"reference_id\",crud.util().newUUID());\ndefinition.put(\"last_refresh_timestamp\",crud.util().currentTimeStamp());\ndefinition.put(\"definition_id\",definition_id);\ndefinition.put(\"definition\",attachTransaction(crud.add(\"datastatement_id\",definition_id)).add(\"crudzillaResultSetFormat\",\"bean\").call(getDataStatement));\n\nObject type_definition = crud.call(getTypeDefinition);\ndefinition.put(\"type_definition\",type_definition); \n\n//get the crud executable\nif(type_definition.implementorRefType.compareTo(\"embedded\") == 0){\n  //arguments.METHOD = \"VIEW\";\n  definition.put(\"implementor\",crud.getCrudExecutable(type_definition.implementorPath));\n  //arguments.METHOD = \"GET\";\n}\n\ndefinition.put(\"execution_parameters\",attachTransaction(crud.add(\"definition_id\",definition_id)).call(getParameters));\ndefinition.put(\"preexecution_handlers\",attachTransaction(crud.add(\"definition_id\",definition_id)).call(getPreExecutionHandlers));\ndefinition.put(\"postexecution_handlers\",attachTransaction(crud.add(\"definition_id\",definition_id)).call(getPostExecutionHandlers));\ndefinition.put(\"accesscontrols\",attachTransaction(crud.add(\"definition_id\",definition_id)).call(getAccessControls));\n\nreturn definition;","name":"generate-datastatement-executable","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"yes","requireAllIdentities":null,"lastModifiedTimeStamp":"1392954703586"},"preexecution_handlers":[],"execution_parameters":[{"id":"d8e661cc-07e4-43b7-93ce-9ce4736d328c","definitionId":"75450e18-6e4d-4390-af69-b4bbb1021e42","required":"no","name":"getParameters","type":"string","validationRegEx":"","defaultValue":"../../nvp-processing/get-execution-parameters.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"0"},{"id":"35db7521-a08e-4844-bd8c-abac209ea990","definitionId":"75450e18-6e4d-4390-af69-b4bbb1021e42","required":"no","name":"getDataStatement","type":"string","validationRegEx":"","defaultValue":"get-datastatement.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"1"},{"id":"008ebfc7-263c-41e8-9116-b4597e950615","definitionId":"75450e18-6e4d-4390-af69-b4bbb1021e42","required":"no","name":"getPostExecutionHandlers","type":"string","validationRegEx":"","defaultValue":"../../post-execution/get-postexecution-handlers.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"2"},{"id":"93b491d9-7a81-471c-b07b-7e3d0e8ad178","definitionId":"75450e18-6e4d-4390-af69-b4bbb1021e42","required":"no","name":"getTypeDefinition","type":"string","validationRegEx":"","defaultValue":"/crudzilla-platform/engine/datastatement-crud-type-definition.ins","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"3"},{"id":"264b8832-7daa-472a-9247-8a8303369916","definitionId":"75450e18-6e4d-4390-af69-b4bbb1021e42","required":"no","name":"getPreExecutionHandlers","type":"string","validationRegEx":"","defaultValue":"../../pre-execution/get-preexecution-handlers.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"4"},{"id":"dea7b9d2-cae4-47f2-829f-1bb665fd8295","definitionId":"75450e18-6e4d-4390-af69-b4bbb1021e42","required":"no","name":"getAccessControls","type":"string","validationRegEx":"","defaultValue":"../../access-control/get-accesscontrols.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"5"}],"reference_id":"628e93ff-8377-428e-8bf4-9f4aecbfe80b","accesscontrols":[]}