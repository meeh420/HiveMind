{"definition_id":"0b1ccb34-e0d0-4dbd-855a-a179c94cf1b8","last_refresh_timestamp":1378565102042,"postexecution_handlers":[],"definition":{"id":"0b1ccb34-e0d0-4dbd-855a-a179c94cf1b8","code":"import java.util.List;\n\nString new_apptaxonomy_id   = arguments.apptaxonomy_id;\nString old_apptaxonomy_id   = arguments.old_apptaxonomy_id;\nString id                   = arguments.id;\n\n\n//child nodes of this node\nList childNodes = crud\n.add(\"apptaxonomy_id\",old_apptaxonomy_id)\n.add(\"parent_id\",id)\n.call(getAppTaxonomys);\n\n\n\nfor(Object node:childNodes){\n  \n  //make recursive call.\n  crud\n  .add(\"old_apptaxonomy_id\",node.apptaxonomy_id)\n  .add(\"apptaxonomy_id\", /*new_apptaxonomy_id =~ '0'*/new_apptaxonomy_id.compareTo(\"0\")==0?id:new_apptaxonomy_id)\n  .add(\"id\",node.id)\n  .call(updateAppTaxonomyRoots);  \n}\n    \n//crudzilla.logger().info(\"apptaxonomy_id:\"+new_apptaxonomy_id);\n//update the root of this node.\ncrud\n.add(\"old_apptaxonomy_id\",old_apptaxonomy_id)\n.add(\"apptaxonomy_id\",new_apptaxonomy_id)\n.add(\"id\",id)\n.call(updateAppTaxonomyRoot);","name":"update-apptaxonomy-root","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1377449529522"},"preexecution_handlers":[],"execution_parameters":[{"id":"f45a3a78-50fa-47f4-a72e-6112ea821e36","definitionId":"0b1ccb34-e0d0-4dbd-855a-a179c94cf1b8","required":"no","name":"getAppTaxonomy","type":"crud","validationRegEx":"","defaultValue":"get-apptaxonomy.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"0"},{"id":"d6b78383-af26-4897-ae69-54d24b82b953","definitionId":"0b1ccb34-e0d0-4dbd-855a-a179c94cf1b8","required":"no","name":"getAppTaxonomys","type":"crud","validationRegEx":"","defaultValue":"get-apptaxonomys.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"1"},{"id":"61906011-3b12-4ed7-9fef-f2ba2ff5e7f2","definitionId":"0b1ccb34-e0d0-4dbd-855a-a179c94cf1b8","required":"no","name":"updateAppTaxonomyRoots","type":"crud","validationRegEx":"","defaultValue":"update-apptaxonomy-root.ste","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"2"},{"id":"5bf4a8c0-e94c-4fda-8b72-91871bbf1d4a","definitionId":"0b1ccb34-e0d0-4dbd-855a-a179c94cf1b8","required":"no","name":"updateAppTaxonomyRoot","type":"crud","validationRegEx":"","defaultValue":"update-apptaxonomy-root.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"3"}],"reference_id":"aaa79b8f-5c6d-41d0-9674-a5eb0afaed65","accesscontrols":[]}