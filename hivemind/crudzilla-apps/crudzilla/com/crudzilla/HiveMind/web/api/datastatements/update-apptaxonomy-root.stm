{"definition_id":"43f6ebf4-dd40-4a2c-a062-0465e81348f3","last_refresh_timestamp":1374201432209,"postexecution_handlers":[{"definitionId":"43f6ebf4-dd40-4a2c-a062-0465e81348f3","id":"54e4430a-a2c0-4220-89a1-21464dac36cc","enable":"yes","path":"/api/datastatements/update-apptaxonomy-link.stm","returnValName":"","returnMode":"ignore_return","primaryResultVarName":"","argPropagationListPath":"","argPropagationMode":"pass_map"}],"definition":{"id":"43f6ebf4-dd40-4a2c-a062-0465e81348f3","definitionId":"43f6ebf4-dd40-4a2c-a062-0465e81348f3","sqlCode":"update apptaxonomy set\napptaxonomy_id=:apptaxonomy_id\nwhere\n(  \n  /*apptaxonomy.apptaxonomy_id=:old_apptaxonomy_id or\n  (apptaxonomy.apptaxonomy_id = '0' and apptaxonomy.id=:old_apptaxonomy_id)*/\n  id=:id\n)\nand\n(\n    (/*Destination taxonomy*/\n      select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where \n      (\n        (\n          (:apptaxonomy_id='0' and apptaxonomy_accesscontrol.apptaxonomy_id=:id) or\n          apptaxonomy_accesscontrol.apptaxonomy_id = :apptaxonomy_id\n        )\n        and\n        (\n          apptaxonomy_accesscontrol.user_id=:crudzilla_user/* or \n          (\n            select count(user_roles.role_id) from \n            user_roles where user_roles.user_id=:crudzilla_user and user_roles.role_id= apptaxonomy_accesscontrol.role_id\n          )>0*/\n        ) \n        and\n        (\n          apptaxonomy_accesscontrol.write_access='yes'\n        )\n      )\n    )>0 \n    and\n    (/*Source taxonomy*/\n      select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where \n      (\n        (\n          (:old_apptaxonomy_id='0' and apptaxonomy_accesscontrol.id=apptaxonomy.id) or \n          apptaxonomy_accesscontrol.apptaxonomy_id = :old_apptaxonomy_id\n        )\n        and\n        (\n          apptaxonomy_accesscontrol.user_id=:crudzilla_user or \n          (\n            select count(user_roles.role_id) from \n            user_roles where user_roles.user_id=:crudzilla_user and user_roles.role_id= apptaxonomy_accesscontrol.role_id\n          )>0\n        ) \n        and\n        (\n          apptaxonomy_accesscontrol.write_access='yes'\n        )\n      )      \n    )>0\n)\n","preparedStatement":"update apptaxonomy set\napptaxonomy_id=?\nwhere\n(  \n  \n  id=?\n)\nand\n(\n    (\n      select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where \n      (\n        (\n          (?='0' and apptaxonomy_accesscontrol.apptaxonomy_id=?) or\n          apptaxonomy_accesscontrol.apptaxonomy_id = ?\n        )\n        and\n        (\n          apptaxonomy_accesscontrol.user_id=?\n        ) \n        and\n        (\n          apptaxonomy_accesscontrol.write_access='yes'\n        )\n      )\n    )>0 \n    and\n    (\n      select count(apptaxonomy_accesscontrol.id) from apptaxonomy_accesscontrol where \n      (\n        (\n          (?='0' and apptaxonomy_accesscontrol.id=apptaxonomy.id) or \n          apptaxonomy_accesscontrol.apptaxonomy_id = ?\n        )\n        and\n        (\n          apptaxonomy_accesscontrol.user_id=? or \n          (\n            select count(user_roles.role_id) from \n            user_roles where user_roles.user_id=? and user_roles.role_id= apptaxonomy_accesscontrol.role_id\n          )>0\n        ) \n        and\n        (\n          apptaxonomy_accesscontrol.write_access='yes'\n        )\n      )      \n    )>0\n)\n","preparedStatementParamList":"apptaxonomy_id,id,apptaxonomy_id,id,apptaxonomy_id,crudzilla_user,old_apptaxonomy_id,old_apptaxonomy_id,crudzilla_user,crudzilla_user","statementType":"select","resultSetTemplate":"{}","dataSourcePath":"/crudzilla-app-settings/crudzilla-crud-datasource.ins","name":"update-apptaxonomy-root","description":"","sqlDialect":"text/x-mysql","crudType":"datastatement","transactionPath":null,"transactionAction":null,"dataModelReferencePath":null,"resultSetProcessorPath":null,"sqlSrcPath":null,"serverSideOnly":"no","lastModifiedTimeStamp":"1374172080769"},"preexecution_handlers":[],"type_definition":{"name":"datastatement","postValidateHandler":"","implementorPath":"/crudzilla-platform/engine/datastatement-crud-implementor.ste","implementorRefType":"reference","initializerPath":"/crudzilla-platform/engine/on-datastatement-crud-loaded.ste"},"execution_parameters":[],"reference_id":"7f413d58-3d54-4ee9-a453-8cdce8072634","accesscontrols":[]}