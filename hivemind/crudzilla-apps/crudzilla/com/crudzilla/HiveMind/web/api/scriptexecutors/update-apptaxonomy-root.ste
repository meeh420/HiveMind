{"definition_id":"139097d9-61b5-4867-926b-f3345303d152","last_refresh_timestamp":1372790298470,"postexecution_handlers":[],"definition":{"id":"139097d9-61b5-4867-926b-f3345303d152","code":"var new_apptaxonomy_id   = arguments.apptaxonomy_id;\nvar old_apptaxonomy_id   = arguments.old_apptaxonomy_id;\nvar id                   = arguments.id;\n\n//setup arguments\narguments.apptaxonomy_id = old_apptaxonomy_id;\narguments.parent_id      = id;\n\n//child nodes of this node\nvar childNodes = crud.call(getAppTaxonomys,arguments);\n\n//crudzilla.logger().info(childNodes.size());\n\nfor(node:childNodes){\n  //setup arguments\n  arguments.old_apptaxonomy_id = node.apptaxonomy_id;\n  arguments.apptaxonomy_id \t   = new_apptaxonomy_id =~ '0'?id:new_apptaxonomy_id;\n  arguments.id                 = node.id;\n  \n  //make recursive call.\n  crud.call(updateAppTaxonomyRoots,arguments);  \n}\n    \n//setup arguments\narguments.old_apptaxonomy_id = old_apptaxonomy_id;\narguments.apptaxonomy_id \t = new_apptaxonomy_id;\narguments.id                 = id;\n\n//update the root of this node.\ncrud.call(updateAppTaxonomyRoot,arguments);","name":"update-apptaxonomy-root","description":null,"crudType":"scriptexecutor","type":"jexl","serverSideOnly":"no","lastModifiedTimeStamp":"1369831880089"},"preexecution_handlers":[],"execution_parameters":[{"id":"01635aa0-8be1-4695-8163-3019e6986c45","definitionId":"139097d9-61b5-4867-926b-f3345303d152","required":"no","name":"updateAppTaxonomyRoot","type":"string","validationRegEx":null,"defaultValue":"/api/datastatements/update-apptaxonomy-root.stm","maxLength":null,"minLength":"","lineEndLength":null,"maxRange":null,"minRange":null,"dateFormat":null,"dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":null,"evalLeft":null,"evalRight":null,"keepAliveCount":null,"isFinal":null},{"id":"2c763eaf-3df9-4930-ae39-f791114b0b2d","definitionId":"139097d9-61b5-4867-926b-f3345303d152","required":"no","name":"updateAppTaxonomyRoots","type":"string","validationRegEx":null,"defaultValue":"/api/scriptexecutors/update-apptaxonomy-root.ste","maxLength":null,"minLength":"","lineEndLength":null,"maxRange":null,"minRange":null,"dateFormat":null,"dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":null,"evalLeft":null,"evalRight":null,"keepAliveCount":null,"isFinal":null},{"id":"62a6e005-4d39-470f-af66-119ec0a1dc33","definitionId":"139097d9-61b5-4867-926b-f3345303d152","required":"no","name":"getAppTaxonomys","type":"string","validationRegEx":null,"defaultValue":"/api/datastatements/get-apptaxonomys.stm","maxLength":null,"minLength":"","lineEndLength":null,"maxRange":null,"minRange":null,"dateFormat":null,"dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":null,"evalLeft":null,"evalRight":null,"keepAliveCount":null,"isFinal":null},{"id":"9c4e1cef-8551-48fe-a63c-476857ef6f5c","definitionId":"139097d9-61b5-4867-926b-f3345303d152","required":"no","name":"getAppTaxonomy","type":"string","validationRegEx":null,"defaultValue":"/api/datastatements/get-apptaxonomy.stm","maxLength":null,"minLength":"","lineEndLength":null,"maxRange":null,"minRange":null,"dateFormat":null,"dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":null,"evalLeft":null,"evalRight":null,"keepAliveCount":null,"isFinal":null}],"reference_id":"75480c14-77ec-4da5-b938-ea34518d8e7c","accesscontrols":[]}