{"definition_id":"2b0f83e1-303b-489b-945c-b00898d7f081","last_refresh_timestamp":1372790300149,"postexecution_handlers":[],"definition":{"id":"2b0f83e1-303b-489b-945c-b00898d7f081","code":"var id           = arguments.id;\nvar nextParentId = arguments.parent_id;\n\n//don't allow a node to be dropped onto itself\nif(id =~ nextParentId)return false;\n\n//don't allow a node to be dropped onto any of its decendants\nwhile(nextParentId !~ '0'){\n    arguments.id = nextParentId;\n  \n    \n    arguments.resultSetFormat = \"bean\"\n    var parentTaxonomy = crud.call(getAppTaxonomy,arguments);\n    \n    //crudzilla.logger().info(parentTaxonomy.parentId);\n  \t\n    if(parentTaxonomy.parentId =~ id){\n        arguments.id = id;\n        return false;\n    }nextParentId = parentTaxonomy.parentId;\n}\n\narguments.id = id;\nreturn true;","name":"validate_apptaxonomy_position","description":null,"crudType":"scriptexecutor","type":"jexl","serverSideOnly":"yes","lastModifiedTimeStamp":"1369863099065"},"preexecution_handlers":[],"execution_parameters":[{"id":"5c816124-1d6e-42de-a003-9f3cb236f166","definitionId":"2b0f83e1-303b-489b-945c-b00898d7f081","required":"no","name":"getAppTaxonomy","type":"string","validationRegEx":null,"defaultValue":"/api/datastatements/get-apptaxonomy.stm","maxLength":null,"minLength":"","lineEndLength":null,"maxRange":null,"minRange":null,"dateFormat":null,"dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":null,"evalLeft":null,"evalRight":null,"keepAliveCount":null,"isFinal":null}],"reference_id":"2209b607-e885-464a-9d55-98b5a8534818","accesscontrols":[]}