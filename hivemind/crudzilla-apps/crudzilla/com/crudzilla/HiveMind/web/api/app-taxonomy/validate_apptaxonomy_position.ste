{"definition_id":"f6d6baa7-a226-4034-893f-5329a2dcfd3e","last_refresh_timestamp":1379371399824,"postexecution_handlers":[],"definition":{"id":"f6d6baa7-a226-4034-893f-5329a2dcfd3e","code":"String id           = arguments.id;\nString nextParentId = arguments.parent_id;\n\n//don't allow a node to be dropped onto itself\n//if(id =~ nextParentId)return false;\nif(id.compareTo(nextParentId) == 0)return false;\n\n//don't allow a node to be dropped onto any of its decendants\nwhile(nextParentId.compareTo(\"0\") != 0)/*(nextParentId !~ '0')*/{\n    arguments.put(\"id\",nextParentId);\n  \n    \n    arguments.put(\"crudzillaResultSetFormat\",\"bean\");\n    Object parentTaxonomy = crud.call(getAppTaxonomy,arguments);\n    \n    //crudzilla.logger().info(parentTaxonomy.parentId);\n  \t\n    if(/*parentTaxonomy.parentId =~ id*/parentTaxonomy.parentId.compareTo(id) == 0){\n        arguments.put(\"id\",id);\n        return false;\n    }\n    nextParentId = parentTaxonomy.parentId;\n}\n\narguments.put(\"id\",id);\nreturn true;","name":"validate_apptaxonomy_position","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"yes","requireAllIdentities":null,"lastModifiedTimeStamp":"1379371397915"},"preexecution_handlers":[],"execution_parameters":[{"id":"14b21137-e8fb-4f3a-8506-6d63846c832c","definitionId":"f6d6baa7-a226-4034-893f-5329a2dcfd3e","required":"no","name":"getAppTaxonomy","type":"crud","validationRegEx":"","defaultValue":"get-apptaxonomy.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"0"}],"reference_id":"a9a8246c-753b-4f2c-9b51-0a8a681c6f1c","accesscontrols":[]}