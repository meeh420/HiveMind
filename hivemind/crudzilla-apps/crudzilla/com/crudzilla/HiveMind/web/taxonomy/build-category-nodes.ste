{"definition_id":"7049839a-77d4-4166-8afc-ba7a679d04e1","last_refresh_timestamp":1381693681634,"postexecution_handlers":[],"definition":{"id":"7049839a-77d4-4166-8afc-ba7a679d04e1","code":"import java.util.ArrayList;\nimport java.util.Map;\nimport java.util.HashMap;\n\nString parentNodeAppTaxonomyId = appTaxonomyId;\nString parentNodeId \t\t   = parentId;\n\n\n\nString[] pathParts = missingPath.charAt(0)=='/'?missingPath.substring(1).split('/'):missingPath.split('/');\nArrayList nodes = new ArrayList();\n\nfor(int i=0;i<pathParts.length;i++){\n    String nodeName = pathParts[i];\n    //add cloned crud to Taxonomy\n    String taxoId = crud\n    .add(\"apptaxonomy_id\",parentNodeAppTaxonomyId)\n    .add(\"parent_id\",parentNodeId)\n    .add(\"presibling_id\",'-1')\n    .add(\"link_id\",'-1')\n    .add(\"link_apptaxonomy_id\",'-1')\n    .add(\"type\",'apptaxonomy-category')\n    .add(\"name\",nodeName)\n    .call(addAppTaxonomy);\n    parentNodeId = taxoId;\n  \n    if(parentNodeAppTaxonomyId.compareTo(\"0\") == 0)\n  \t\tparentNodeAppTaxonomyId = parentNodeId;\n  \n    Map node = new HashMap();\n    node.put(\"name\",nodeName);\n    node.put(\"id\",parentNodeId);\n    nodes.add(node);\n}\n\nreturn nodes;","name":"build-category-nodes","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1381693680991"},"preexecution_handlers":[],"execution_parameters":[{"id":"f06267ec-6638-40ae-a0d0-aacd815a6f65","definitionId":"7049839a-77d4-4166-8afc-ba7a679d04e1","required":"no","name":"findAppTaxonomy","type":"string","validationRegEx":"","defaultValue":"/taxonomy/find-category.ste","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"0"},{"id":"f3d3c699-9d23-4373-af8e-3498a2592965","definitionId":"7049839a-77d4-4166-8afc-ba7a679d04e1","required":"no","name":"addAppTaxonomy","type":"string","validationRegEx":"","defaultValue":"../api/app-taxonomy/add-apptaxonomy.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"1"}],"reference_id":"a511092e-ef83-482d-bd20-edf0592b16cd","accesscontrols":[]}