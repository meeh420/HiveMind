{"definition_id":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","last_refresh_timestamp":1383830815562,"postexecution_handlers":[],"definition":{"id":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","code":"//get field object\nObject field = crud.add(\"instantiator_id\",id)\n\t\t\t\t   .add(\"crudzillaResultSetFormat\",\"bean\")\n\t\t\t\t   .call(getInstantiator);\n\nif(field == null){\n  \n  return crud\n  .add(\"name\",name)\n  .add(\"column\",column)\n  .add(\"useAsLabel\",useAsLabel)\n  .add(\"relPath\",relPath)\n  .call(\"add-field.ste\");    \n}\n\n//update field name\ncrud.add(\"id\",id)\n\t.add(\"name\",name)\n\t.call(updateInstantiatorName);\n\n\n\n\nObject fieldTaxonomy = crud.add(\"taxonomyPath\", relPath+\"/fields/\"+field.name)\n.call(findAppTaxonomy);\n\n//update field taxonomy\ncrud.add(\"id\",fieldTaxonomy.id)\n\t.add(\"name\",name)\n\t.call(updateAppTaxonomyName);\n\ncrud.add(\"definitionId\",id)\n    .add(\"name\",\"name\")\n    .add(\"defaultValue\",name)\n    .call(updateParameter);\n\ncrud.add(\"definitionId\",id)\n    .add(\"name\",\"useAsLabel\")\n    .add(\"defaultValue\",useAsLabel)\n    .call(updateParameter);\n\ncrud.add(\"definitionId\",id)\n    .add(\"name\",\"column\")\n    .add(\"defaultValue\",column)\n    .call(updateParameter);\n\ncrud.add(\"relPath\",relPath+\"/fields/\"+field.name+\".ins\")\n\t.add(\"name\",name+\".ins\")\n\t.call(\"/file-system/rename.ste\");\n\n\n//get field list\nObject fieldListTaxonomy = crud\n.add(\"taxonomyPath\", relPath+\"/fields\")\n.add(\"type\",\"instantiator\")\n.call(findAppTaxonomy);\n\n//update field list\nList parameters = crud.add(\"definition_id\",fieldListTaxonomy.linkId).call(getParameters);\n\nfor(Object param:parameters){\n  if(param.defaultValue.endsWith(field.name+\".ins\")){\n    crud.add(\"definition_id\",fieldListTaxonomy.linkId)\n        .add(\"oldDefaultValue\",param.defaultValue)\n        .add(\"defaultValue\",\"fields/\"+name+\".ins\")\n        .call(updateParameterValByVal); \n    break;\n  }\n}\n\ncrud.add(\"relPath\",relPath+\"/fields/\"+name).call(\"/taxonomy/bake-crud.ste\");\ncrud.add(\"relPath\",relPath+\"/fields\")\n\t.add(\"type\",\"instantiator\")\n\t.call(\"/taxonomy/bake-crud.ste\");\n\nreturn null;","name":"update-field","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1383830814193"},"preexecution_handlers":[],"execution_parameters":[{"id":"99935a09-f02d-4795-89f0-9bf4681286a4","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"updateParameter","type":"string","validationRegEx":"","defaultValue":"/api/nvp-processing/update-execution-parameter-value-by-name.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"0"},{"id":"fcb8fe03-3694-4c47-bea6-90e74ce58848","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"getInstantiator","type":"string","validationRegEx":"","defaultValue":"/api/primary-execution/instantiator/get-instantiator.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"1"},{"id":"0e7248b9-d8ca-47c7-9687-66defa89507f","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"updateInstantiatorName","type":"string","validationRegEx":"","defaultValue":"/api/primary-execution/instantiator/update-instantiator-name.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"2"},{"id":"d2931c3d-deac-485c-9aa6-f32bb28af2dc","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"updateAppTaxonomyName","type":"string","validationRegEx":"","defaultValue":"/api/app-taxonomy/update-apptaxonomy-name.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"3"},{"id":"b1ecfc58-b5c2-419c-a4a6-7185512f1495","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"findAppTaxonomy","type":"string","validationRegEx":"","defaultValue":"/taxonomy/find-category.ste","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"4"},{"id":"016fe5ed-f860-4178-aa04-c5f755e3b07d","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"getParameters","type":"string","validationRegEx":"","defaultValue":"/api/nvp-processing/get-execution-parameters.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"5"},{"id":"ef0e8250-6ee3-40f2-a9b0-6fc3bbf0f0de","definitionId":"46754969-76f2-44ef-8f8a-2ef4c6d74c12","required":"no","name":"updateParameterValByVal","type":"string","validationRegEx":"","defaultValue":"/api/nvp-processing/update-execution-parameter-value-by-value.stm","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"yes","position":"6"}],"reference_id":"261e3a2c-d327-45de-b457-ba0170ed50a0","accesscontrols":[]}