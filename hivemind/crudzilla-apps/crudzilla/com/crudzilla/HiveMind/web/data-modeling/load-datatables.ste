{"definition_id":"7b9208ba-64ed-4e28-bbd3-4138b1207fde","last_refresh_timestamp":1383936718059,"postexecution_handlers":[],"definition":{"id":"7b9208ba-64ed-4e28-bbd3-4138b1207fde","code":"import java.util.List;\nimport java.util.ArrayList;\nimport java.util.Map;\nimport java.util.HashMap;\n\nObject dataTables = crud.call(\"available-big-tables/list.ins\");\n\nList apps = crud.call(\"/new-web-app/app-list/apps.ins\");\n\n\nList bigTables = new ArrayList();\nfor(String dataTable:dataTables){\n  String bigTableName = dataTable.split('/')[dataTable.split('/').length-2];\n  String columnsPath = dataTable.substring(0,dataTable.lastIndexOf('/'));\n  \n  Map bigTable = new HashMap();\n  bigTable.put(\"name\",bigTableName);\n  bigTable.put(\"columnsPath\",columnsPath);\n  \n  for(Object app:apps){\n    if(columnsPath.startsWith(app.baseDir)){\n      //relativize crudPath\n      bigTable.put(\"columnsRelPath\",columnsPath.substring(app.baseDir.length()));\n      break;\n    }\n  }\n  \n  \n  bigTable.put(\"columns\",crud.add(\"relPath\",columnsPath+\"/columns\").call(\"get-columns.ste\"));\n  \n  bigTables.add(bigTable);\n}\n\nreturn bigTables;","name":"load-datatables","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1383936716304"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"51b703d0-988e-4de1-8e82-7f66c892b52c","accesscontrols":[]}