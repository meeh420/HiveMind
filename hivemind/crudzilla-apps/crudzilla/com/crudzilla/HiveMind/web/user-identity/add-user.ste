{"definition_id":"912aacac-44fa-49f8-8fab-426d711516ed","last_refresh_timestamp":1390830942725,"postexecution_handlers":[],"definition":{"id":"912aacac-44fa-49f8-8fab-426d711516ed","code":"crud\n.add(\"user_name\",user_name)\n.add(\"pass_word\",pass_word)\n.add(\"name\",name)\n.add(\"part_store_access_token\",part_store_access_token)\n.call(\"add-user.stm\");\n\nObject user = crud.add(\"user_name\",user_name).call(\"get-user.stm\");\n\nString[] new_roles = roles.split(\",\");\nfor(String role:new_roles){\n  \n  Object roleObj = crud.add(\"role\",role).call(\"get-role-by-name.stm\");\n  if(roleObj != null){\n    \n    crud.add(\"user_id\",user.ID)\n    .add(\"role_id\",roleObj.ID)\n    .call(\"add-user-role.stm\");\n  }\n}\n\ncrud.logger().info(\"new inserted id \"+user.ID);\n\nreturn user.ID.toString();","name":"add-user","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1390830941544"},"preexecution_handlers":[],"execution_parameters":[{"id":"49d146c2-b2d9-4b6b-a134-ba0c6d82fc6a","definitionId":"912aacac-44fa-49f8-8fab-426d711516ed","required":"no","name":"part_store_access_token","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"1"},{"id":"b1aacbaa-1310-4b2e-88e5-2ff1421d945d","definitionId":"912aacac-44fa-49f8-8fab-426d711516ed","required":"no","name":"pass_word","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"2"},{"id":"957ce737-ce35-4601-84cc-3aad5c92f66e","definitionId":"912aacac-44fa-49f8-8fab-426d711516ed","required":"no","name":"user_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"3"}],"reference_id":"14e11bdc-e7d0-49d4-93c2-38a105b7d4b7","accesscontrols":[]}