{"definition_id":"206a4fcc-b908-4f17-b5dc-23dd548068bc","last_refresh_timestamp":1378565107850,"postexecution_handlers":[],"definition":{"id":"206a4fcc-b908-4f17-b5dc-23dd548068bc","code":"import org.apache.commons.io.FileUtils;\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport com.crudzilla.platform.Crudzilla;\n\nString jettyHome = \"\";\nif(System.getProperty(\"jetty.home\") != null && !System.getProperty(\"jetty.home\").isEmpty())\n  jettyHome = System.getProperty(\"jetty.home\");\nelse\n  jettyHome = crudzilla.sysSettings().get(\"crudzilla_jetty_home\");\n\n\n//String appName = relPath.split('/')[relPath.split('/').length-1];\nString assetBaseDir = new File(crud.appBaseDir()+\"/\"+crudzilla.sysSettings().get(\"crudzilla_asset_base\")).getCanonicalPath();\n\nFile contextFile = new File(jettyHome+\"/contexts/\"+appName+\".xml\");\n\n//update context file, jetty will automatically pickup changes\nFileUtils.writeStringToFile(contextFile,FileUtils.readFileToString(new File(assetBaseDir+\"/\"+relPath),\"utf-8\"),\"utf-8\");\n","name":"deploy-context","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1377110973622"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"159ccb08-38be-49ea-8e6d-2c1d7b043e55","accesscontrols":[]}