{"definition_id":"05d4c2fa-f274-4f36-915f-853b864e09e1","last_refresh_timestamp":1378565103939,"postexecution_handlers":[],"definition":{"id":"05d4c2fa-f274-4f36-915f-853b864e09e1","code":"import java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.ResultSetHandler;\nimport com.crudzilla.platform.Crudzilla;\n\nResultSetHandler resultSetHandler = new ResultSetHandler<Object>() {\n  \n  public Object handle(ResultSet rs) throws SQLException {\n    ResultSetMetaData meta = rs.getMetaData();\n    int cols = meta.getColumnCount();\n        \n    List columns = new ArrayList<String>();\n    for (int i = 0; i < cols; i++){\n        Map column = new HashMap();\n      \tcolumn.put(\"name\",meta.getColumnName(i+1));\n        column.put(\"type\",meta.getColumnTypeName(i+1));\n      \n      \tcolumns.add(column);\n    }\n    return columns;\n  }\n}; \n  \narguments.put(\"dataSourceConfig\",crud.call(dataSrcPath,arguments));  \njava.sql.Connection conn = (java.sql.Connection)crud.call(\"\"+Crudzilla.crudzilla().sysSettings().get(\"crudzilla_datasource_connection_creator\"), arguments);\nreturn new QueryRunner().query(conn,\"select * from \"+dataTable,resultSetHandler);","name":"create-authentication-tables","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"yes","requireAllIdentities":null,"lastModifiedTimeStamp":"1372182699025"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"a95ffd63-530b-4fa6-93c2-152adfd962a6","accesscontrols":[]}