{"definition_id":"eb01871d-8790-46cd-b840-267852dcdbe7","last_refresh_timestamp":1378565108179,"postexecution_handlers":[],"definition":{"id":"eb01871d-8790-46cd-b840-267852dcdbe7","code":"import org.apache.commons.io.FileUtils;\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport com.crudzilla.platform.Crudzilla;\n\nString jettyHome = \"\";\nif(System.getProperty(\"jetty.home\") != null && !System.getProperty(\"jetty.home\").isEmpty())\n  jettyHome = System.getProperty(\"jetty.home\");\nelse\n  jettyHome = crudzilla.sysSettings().get(\"crudzilla_jetty_home\");\n\n\n//String appName = relPath.split('/')[relPath.split('/').length-1];\nString assetBaseDir = new File(crud.appBaseDir()+\"/\"+crudzilla.sysSettings().get(\"crudzilla_asset_base\")).getCanonicalPath();\n\n//File contextFile = new File(jettyHome+\"/contexts/\"+appName+\".xml\");\n\n//update context file, jetty will automatically pickup changes\nFileUtils.copyFileToDirectory(new File(assetBaseDir+\"/\"+relPath),new File(jettyHome+\"/webapps\"));\n","name":"deploy-war","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1377111002166"},"preexecution_handlers":[],"execution_parameters":[],"reference_id":"36486780-9bac-4727-93b4-472cad737f07","accesscontrols":[]}