{"definition_id":"5cb68740-87a9-408d-ae71-9a7d03e9ef42","last_refresh_timestamp":1378732339858,"postexecution_handlers":[],"definition":{"id":"5cb68740-87a9-408d-ae71-9a7d03e9ef42","code":"import java.io.StringWriter;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport org.apache.log4j.WriterAppender;\nimport org.apache.log4j.PatternLayout;\n\nif(crudzilla.sysSettings().get(\"loggerStringWriter\") == null){\n  Object loggerConfig = crud.call(loggerConfigPath);\n\n  StringWriter consoleWriter = new StringWriter();\n  WriterAppender appender = new WriterAppender(new PatternLayout(loggerConfig.pattern),consoleWriter);\n  appender.setName(loggerConfig.name);\n\n  if(loggerConfig.level.compareToIgnoreCase(\"ALL\") == 0)\n  \tappender.setThreshold(org.apache.log4j.Level.ALL);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"DEBUG\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.DEBUG); \n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"INFO\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.INFO);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"ERROR\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.ERROR);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"TRACE\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.TRACE);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"OFF\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.OFF);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"WARN\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.WARN);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"ERROR\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.ERROR); \n\n  crudzilla.sysSettings().set(\"loggerStringWriter\",consoleWriter);\n  \n  for(Object loggerClass:loggerConfig.classes){\n    try{\n      Logger.getLogger(Class.forName(loggerClass.className)).addAppender(appender);\n    }catch(Exception ex){\n      \n    }\n  }\n}","name":"configure-log4j-loggers","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"yes","requireAllIdentities":null,"lastModifiedTimeStamp":"1378571708943"},"preexecution_handlers":[],"execution_parameters":[{"id":"3e386cd5-d8f2-40d9-b506-af044d203c0e","definitionId":"5cb68740-87a9-408d-ae71-9a7d03e9ef42","required":"no","name":"loggerConfigPath","type":"crud","validationRegEx":"","defaultValue":"config.ins","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":"","isFinal":"yes","position":"0"}],"reference_id":"c5e470f1-3e7f-4e79-950a-8e61a78cdff8","accesscontrols":[]}