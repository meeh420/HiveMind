{"definition_id":"d51bb3ad-3d38-4f19-b9af-028d40db295e","last_refresh_timestamp":1391826737376,"postexecution_handlers":[],"definition":{"id":"d51bb3ad-3d38-4f19-b9af-028d40db295e","code":"import java.io.StringWriter;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport org.apache.log4j.WriterAppender;\nimport org.apache.log4j.PatternLayout;\n\nif(crudzilla.sysSettings().get(\"loggerStringWriter\") == null || reload.compareTo(\"true\") == 0){\n  Object loggerConfig = crud.call(loggerConfigPath);\n\n  StringWriter consoleWriter = new StringWriter();\n  WriterAppender appender = new WriterAppender(new PatternLayout(loggerConfig.pattern),consoleWriter);\n  appender.setName(loggerConfig.name);\n\n  if(loggerConfig.level.compareToIgnoreCase(\"ALL\") == 0)\n  \tappender.setThreshold(org.apache.log4j.Level.ALL);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"DEBUG\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.DEBUG); \n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"INFO\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.INFO);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"ERROR\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.ERROR);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"TRACE\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.TRACE);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"OFF\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.OFF);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"WARN\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.WARN);\n  else\n  if(loggerConfig.level.compareToIgnoreCase(\"ERROR\") == 0)\n    appender.setThreshold(org.apache.log4j.Level.ERROR); \n\n  crudzilla.sysSettings().set(\"loggerStringWriter\",consoleWriter);\n  \n  for(Object loggerClass:loggerConfig.classes){\n    try\n    {\n      \tif(loggerClass.className != null && !loggerClass.className.isEmpty())\n      \t\tLogger.getLogger(Class.forName(loggerClass.className)).addAppender(appender);\n        else\n        if(loggerClass.name != null && !loggerClass.name.isEmpty()){\n            Logger logger = Logger.getLogger(loggerClass.name);\n            logger.addAppender(appender);\n            logger.setLevel(org.apache.log4j.Level.DEBUG);\n        }\n      \n    }catch(Exception ex){\n      crud.logger().info(\"Error configuring CWAB appender for logger \",ex);\n    }\n  }\n}","name":"configure-log4j-loggers","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":null,"lastModifiedTimeStamp":"1382373970376"},"preexecution_handlers":[],"execution_parameters":[{"id":"3607a236-5158-4ff1-873e-823b8cf5395c","definitionId":"d51bb3ad-3d38-4f19-b9af-028d40db295e","required":"no","name":"loggerConfigPath","type":"crud","validationRegEx":"","defaultValue":"config.ins","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":"","isFinal":"yes","position":"0"},{"id":"76900f72-d8fd-4324-a415-c14a48564f1a","definitionId":"d51bb3ad-3d38-4f19-b9af-028d40db295e","required":"no","name":"reload","type":"string","validationRegEx":"","defaultValue":"false","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"1"}],"reference_id":"ef69346c-cc4d-45d8-9fc9-8a1e4572d875","accesscontrols":[]}