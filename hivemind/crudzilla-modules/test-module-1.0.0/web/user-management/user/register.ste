{"definition_id":"8b7a90ef-6271-46dc-b882-e54f966f0085","last_refresh_timestamp":1391826702134,"postexecution_handlers":[],"definition":{"id":"8b7a90ef-6271-46dc-b882-e54f966f0085","code":"\nString emailAddress = arguments.get(\"email-textfield\");\nString passWord\t\t= arguments.get(\"password-textfield\");\nString first_name\t= arguments.get(\"first_name-textfield\");\nString last_name\t= arguments.get(\"last_name-textfield\");\nString screen_name  = arguments.get(\"screen_name-textfield\");\n\nObject user = crud.add(\"user_name\",emailAddress).call(\"get.stm\");\n\n\nif(user != null)\n\treturn \"{\\\"status\\\":\\\"failed\\\",\\\"msg\\\":\\\"There is an existing account for this email address.\\\"}\";\n\n\nuser = crud.add(\"screen_name\",screen_name).call(\"profile/get-user-by-screen-name.stm\");\nif(user != null)\n\treturn \"{\\\"status\\\":\\\"failed\\\",\\\"msg\\\":\\\"There is an existing account for this screen name.\\\"}\";\n\n\nif(\n   (emailAddress != null && !emailAddress.isEmpty()) &&\n   (passWord != null && passWord.length()>=5) && \n   (first_name != null && !first_name.isEmpty()) &&\n   (screen_name != null && !screen_name.isEmpty())/*&& \n   (last_name != null && !last_name.isEmpty())*/){\n  \n    String user_id = crud\n  \t\t.add(\"user_name\",emailAddress)\n  \t\t.add(\"pass_word\",passWord/*+\":\"+verification_code*/)\n  \t\t.add(\"first_name\",first_name)\n  \t\t.add(\"last_name\",last_name)\n  \t\t.add(\"screen_name\",screen_name)\n  \t\t.add(\"contact_email_address\",emailAddress)\n  \t\t.call(\"add.stm\");\n   \n   //send verification email \n    /*crud\n  \t   .add(\"emailAddress\",emailAddress)\n       .add(\"user_id\",user_id)\n  \t   .add(\"verification_code\",verification_code)\n       .add(\"userName\",first_name)\n       .call(\"send-verification-code.esd\"); */ \n  \n  return \"{\\\"status\\\":\\\"success\\\"}\";\n}\n\nreturn \"{\\\"status\\\":\\\"failed\\\",\\\"msg\\\":\\\"Please provide all required fields. <\/br>Password must be at least 5 characters.\\\"}\";\n","name":"register","description":"","crudType":"scriptexecutor","type":"groovy","serverSideOnly":"no","requireAllIdentities":"no","lastModifiedTimeStamp":"1382883204291"},"preexecution_handlers":[],"execution_parameters":[{"id":"a4bca696-5a66-4bcb-bd95-b5391b862fce","definitionId":"8b7a90ef-6271-46dc-b882-e54f966f0085","required":"no","name":"verification_code","type":"string","validationRegEx":"","defaultValue":":crudzilla_generate_uuid","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"yes","keepAliveCount":null,"isFinal":"yes","position":"0"},{"id":"25c71031-cac0-4e24-a200-e22551bda78c","definitionId":"8b7a90ef-6271-46dc-b882-e54f966f0085","required":"no","name":"emailAddress","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"1"},{"id":"aa7a4801-1a7b-447f-b296-161eb20c844f","definitionId":"8b7a90ef-6271-46dc-b882-e54f966f0085","required":"no","name":"passWord","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"2"},{"id":"ddc20495-0878-43f3-bf76-a70f66f05fd3","definitionId":"8b7a90ef-6271-46dc-b882-e54f966f0085","required":"no","name":"first_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"3"},{"id":"22a41bc1-99b2-4fdb-af8e-04efccb3306d","definitionId":"8b7a90ef-6271-46dc-b882-e54f966f0085","required":"no","name":"screen_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"4"},{"id":"77bd4c10-3205-4665-9265-f53360581f91","definitionId":"8b7a90ef-6271-46dc-b882-e54f966f0085","required":"no","name":"last_name","type":"string","validationRegEx":"","defaultValue":"","maxLength":"","minLength":"","lineEndLength":"","maxRange":"","minRange":"","dateFormat":"","dateFormatStrict":"no","allowallschemesForURL":"no","allow2slashesForURL":"no","nofragmentsForURL":"no","schemesForURL":"","evalLeft":"no","evalRight":"no","keepAliveCount":null,"isFinal":"no","position":"5"}],"reference_id":"650ff6fb-a94b-476b-a7a9-db4650b49d59","accesscontrols":[]}